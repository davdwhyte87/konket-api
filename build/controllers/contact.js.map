{"version":3,"sources":["../../controllers/contact.js"],"names":["Contact","require","mongoose","exports","add","req","res","user_id","userData","userId","find","email","body","phone","exec","then","contact","length","status","json","code","message","_id","Types","ObjectId","name","user","save","data","catch","console","log","error","contacts","edit","c_id","params","id","updateOne","$set","erro"],"mappings":"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","file":"contact.js","sourcesContent":["const Contact=require('../models/Contact')\r\nconst mongoose=require('mongoose')\r\n\r\n\r\nexports.add=(req,res)=>{\r\n    var user_id=req.userData.userId\r\n    Contact.find({email:req.body.email,phone:req.body.phone}).exec()\r\n    .then(contact=>{\r\n        if(contact.length>0){\r\n            return res.status(200).json({code:0,message:\"This contact already exists\"})\r\n        }\r\n        var contact=Contact({\r\n            _id:new mongoose.Types.ObjectId(),\r\n            name:req.body.name,\r\n            email:req.body.email,\r\n            phone:req.body.phone,\r\n            user:user_id\r\n        })\r\n        contact.save().then(contact=>{\r\n            res.status(200).json({code:1,message:\"Contact added successfully\",data:contact})\r\n        })\r\n        .catch(error=>{\r\n            console.log(error)\r\n            res.status(500).json({code:0,message:\"An error occurred\",error:error})\r\n        })\r\n    })\r\n    .catch(error=>{\r\n        console.log(error)\r\n        res.status(500).json({code:0,message:\"An error occured\",error:error})\r\n    })\r\n}\r\n\r\nexports.contact=(req,res)=>{\r\n    var user_id=req.userData.userId\r\n    Contact.find({user:user_id}).exec().then(contacts=>{\r\n        return res.status(200).json({code:1,data:contacts})\r\n    })\r\n    .catch(error=>{\r\n        console.log(error)\r\n        return res.status(500).json({code:0,message:\"An error n occured\"})\r\n    })\r\n}\r\n\r\nexports.edit=(req,res)=>{\r\n    var c_id=req.params.id \r\n    var user_id=req.userData.userId\r\n    Contact.updateOne({_id:c_id,user:user_id},{$set:{\r\n        name:req.body.name,\r\n        email:req.body.email,\r\n        phone:req.body.phone\r\n    }}).exec()\r\n    .then(contact=>{\r\n        console.log(contact)\r\n        return res.status(200).json({code:1,message:\"Conatact data updated\"})\r\n    })\r\n    .catch(erro=>{\r\n        console.log(erro)\r\n        return res.status(500).json({code:0,message:\"An error occurred\",error:erro})\r\n    })\r\n}"]}